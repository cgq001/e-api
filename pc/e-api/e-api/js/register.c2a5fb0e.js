(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{"0309":function(e,t,o){"use strict";o.r(t);var n=o("6a59"),c=function(e){return Object(n["pushScopeId"])("data-v-3371174b"),e=e(),Object(n["popScopeId"])(),e},r={class:"loginBox"},l={class:"loginMain"},i={class:"loginTitle"},a=c((function(){return Object(n["createElementVNode"])("span",null,"E-API",-1)})),d=c((function(){return Object(n["createElementVNode"])("span",{class:"el-icon-close loginTitleIcon"},null,-1)})),s=c((function(){return Object(n["createElementVNode"])("div",{class:"loginTag"}," 注册新用户 ",-1)})),u={class:"loginMainContent"},m={class:"wxBoxFoot"},b=Object(n["createTextVNode"])("已有账号,去登陆");function f(e,t){var o=Object(n["resolveComponent"])("RegisterUser"),c=Object(n["resolveComponent"])("el-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",i,[a,d,1==e.isElectron?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"iconfont icon-guanbi1 loginTitleIcon",onClick:t[0]||(t[0]=function(){return e.goClose&&e.goClose.apply(e,arguments)})})):Object(n["createCommentVNode"])("",!0)]),s,Object(n["createElementVNode"])("div",u,[Object(n["createVNode"])(o)]),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(c,{type:"primary",href:"#/login"},{default:Object(n["withCtx"])((function(){return[b]})),_:1})])])])}var p={class:"wxBox"},g={class:"wxFrom"},j=Object(n["createTextVNode"])("立即注册");function O(e,t){var o=this,c=Object(n["resolveComponent"])("el-input"),r=Object(n["resolveComponent"])("el-form-item"),l=Object(n["resolveComponent"])("el-col"),i=Object(n["resolveComponent"])("el-button"),a=Object(n["resolveComponent"])("el-form");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p,[Object(n["createElementVNode"])("div",g,[Object(n["createVNode"])(a,{model:e.loginFrom,rules:e.rulesFrom,ref:"ruleForm",class:"demo-ruleForm"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(r,{prop:"email"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{spellcheck:"false",modelValue:e.loginFrom.email,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.loginFrom.email=t}),modelModifiers:{trim:!0},disabled:e.codeLand,placeholder:"请输入邮箱(推荐QQ邮箱，其他可能不成功)地址"},null,8,["modelValue","disabled"])]})),_:1}),Object(n["createVNode"])(r,{prop:"code",style:{display:"flex","justify-content":"flex-start"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{span:11},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{spellcheck:"false",style:{width:"100%"},modelValue:e.loginFrom.code,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.loginFrom.code=t}),modelModifiers:{trim:!0,number:!0},placeholder:"请输入验证码"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(l,{span:2}),Object(n["createVNode"])(l,{span:11},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{type:"primary",style:{width:"100%"},onClick:e.sendCode,loading:e.codeLand},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.codeText),1)]})),_:1},8,["onClick","loading"])]})),_:1})]})),_:1}),Object(n["createVNode"])(r,{prop:"password",style:{"margin-bottom":"50px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(c,{spellcheck:"false",style:{width:"100%"},modelValue:e.loginFrom.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.loginFrom.password=t}),modelModifiers:{trim:!0},placeholder:"请输入密码"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(r,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{type:"primary",style:{width:"100%"},disabled:0==o.codeId.length,loading:e.isRegister,onClick:t[3]||(t[3]=function(t){return e.submitForm("ruleForm")})},{default:Object(n["withCtx"])((function(){return[j]})),_:1},8,["disabled","loading"])]})),_:1})]})),_:1},8,["model","rules"])])])}var h=o("6afb"),v=(o("665c"),o("d6b0"),o("f236")),V={data:function(){var e=function(e,t,o){if(!t)return o(new Error("密码不能为空"));var n=/^[a-zA-Z0-9_-]{6,18}$/;n.test(t)?o():o(new Error("密码须为6~18位的字数、数字或者下划线"))};return{loginFrom:{email:null,password:null,code:null},rulesFrom:{email:[{type:"email",required:!0,message:"请输入邮箱地址",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:e,trigger:"blur"}]},codeText:"发送验证码",codeTime:null,codeLand:!1,isRegister:!1,codeId:""}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.isRegister=!0,Object(v["l"])(Object(h["a"])(Object(h["a"])({},t.loginFrom),{},{uuid:t.codeId})).then((function(e){200==e.status?(t.$toast.success(e.message),t.loginFrom={email:null,password:null,code:null},clearInterval(t.codeTime),t.codeText="获取验证码",t.$router.push("/login")):(t.$toast.fail(e.message),clearInterval(t.codeTime),t.codeText="获取验证码",t.codeLand=!1,t.isRegister=!1),t.isRegister=!1}),(function(e){clearInterval(t.codeTime),t.codeText="获取验证码",t.isRegister=!1}))}))},sendCode:function(){var e=this,t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!this.loginFrom.email||!t.test(this.loginFrom.email))return this.$toast.fail("邮箱地址错误"),!1;this.codeLand=!0,Object(v["m"])({email:this.loginFrom.email}).then((function(t){if(200==t.status){e.$toast.success("发送成功");var o=e,n=120;clearInterval(e.codeTime),e.codeTime=setInterval((function(){n>0?(n-=1,o.codeText=n+"S后失效"):(o.codeText="重新获取验证码",clearInterval(o.codeTime),o.codeLand=!1)}),1e3),e.codeId=t.data.uuid}else e.$toast.fail(t.message),e.codeLand=!1,clearInterval(e.codeTime),e.codeText="获取验证码",e.isRegister=!1}),(function(t){e.codeLand=!1,clearInterval(e.codeTime),e.codeText="获取验证码",e.isRegister=fal}))}},destroyed:function(){clearInterval(this.codeTime),this.codeText="获取验证码"}};o("450c");V.render=O,V.__scopeId="data-v-caf6c050";var w=V,x={components:{RegisterUser:w},data:function(){return{isElectron:"0"}},methods:{goClose:function(){this.$electron.ipcRenderer.send("window-quit")}}};o("9a13");x.render=f,x.__scopeId="data-v-3371174b";t["default"]=x},"450c":function(e,t,o){"use strict";o("dd15")},"5ec6":function(e,t,o){},"9a13":function(e,t,o){"use strict";o("5ec6")},dd15:function(e,t,o){}}]);
//# sourceMappingURL=register.c2a5fb0e.js.map