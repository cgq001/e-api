(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8cacf9a"],{"495c":function(e,t,a){"use strict";a.r(t);a("fd72");var n=a("6a59"),c=function(e){return Object(n["pushScopeId"])("data-v-2965759a"),e=e(),Object(n["popScopeId"])(),e},o={class:"projectIndex"},r={class:"projectIndexAside"},i={class:"projectIndexAsideNews"},l=c((function(){return Object(n["createElementVNode"])("div",{class:"projectIndexAsideNameIcon"},[Object(n["createElementVNode"])("span",{class:"iconfont icon-jiahao"})],-1)})),d={class:"projectIndexAsideList"},s=["onClick"],u=c((function(){return Object(n["createElementVNode"])("span",{class:"iconfont icon-list",style:{color:"#88A0CD","margin-right":"5px"}},null,-1)})),m={key:0,class:"projectIndexMain"},j={class:"projectIndexMainName"},p=c((function(){return Object(n["createElementVNode"])("div",{class:"projectIndexMainNameLeft"}," 项目名称： ",-1)})),h={class:"projectIndexMainNameInput"},b={class:"projectIndexMainNameRight",style:{"margin-left":"20px"}},f=Object(n["createTextVNode"])("保存修改"),O={class:"projectIndexMainNameRight",style:{"margin-left":"20px"}},g=Object(n["createTextVNode"])("添加成员"),x=Object(n["createTextVNode"])("解散项目"),w={class:"projectIndexMainNameRight",style:{"margin-left":"20px"}},N=Object(n["createTextVNode"])("进入项目"),v={class:"projectIndexMainTable"},V=Object(n["createTextVNode"])("观察者"),I=Object(n["createTextVNode"])("编辑者"),C=Object(n["createTextVNode"])("取消权限"),k={class:"teamSubmit"},y=Object(n["createTextVNode"])("确认添加"),U={class:"teamSubmit"},S=Object(n["createTextVNode"])("确认添加");function E(e,t){var a=Object(n["resolveComponent"])("el-empty"),c=Object(n["resolveComponent"])("el-scrollbar"),E=Object(n["resolveComponent"])("el-input"),P=Object(n["resolveComponent"])("el-button"),L=Object(n["resolveComponent"])("el-table-column"),A=Object(n["resolveComponent"])("el-table"),B=Object(n["resolveComponent"])("el-dialog"),T=Object(n["resolveComponent"])("el-option"),_=Object(n["resolveComponent"])("el-select"),D=Object(n["resolveComponent"])("el-form-item"),M=Object(n["resolveComponent"])("el-form");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",i,[l,Object(n["createElementVNode"])("div",{class:"projectIndexAsideNameText",onClick:t[0]||(t[0]=function(){return e.addProject&&e.addProject.apply(e,arguments)})}," 新建项目 ")]),Object(n["createElementVNode"])("div",d,[Object(n["createVNode"])(c,{style:{height:"100%"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.projectList,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["projectIndexAsideListItem",t.uuid==e.asideIndex&&"projectIndexAsideListItemActive"]),key:t.uuid,onClick:function(a){return e.tagProject(t)}},[u,Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.projectName),1)],10,s)})),128)),0==e.projectList.length?(Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:0,description:"暂无数据"})):Object(n["createCommentVNode"])("",!0)]})),_:1})])]),e.asideIndex?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",m,[Object(n["createElementVNode"])("div",j,[p,Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(E,{modelValue:e.asideProjectName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.asideProjectName=t}),maxlength:"16",placeholder:"请输入项目名称(限16个字符以内)"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",b,[Object(n["createVNode"])(P,{type:"primary",style:{width:"120px"},onClick:e.updataProjectName},{default:Object(n["withCtx"])((function(){return[f]})),_:1},8,["onClick"])]),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(P,{type:"success",style:{width:"120px"},onClick:e.addNewsUser},{default:Object(n["withCtx"])((function(){return[g]})),_:1},8,["onClick"])]),Object(n["createElementVNode"])("div",{class:"projectIndexMainNameRight",style:{"margin-left":"20px"},onClick:t[2]||(t[2]=function(){return e.deleteTeam&&e.deleteTeam.apply(e,arguments)})},[Object(n["createVNode"])(P,{type:"danger",style:{width:"120px"}},{default:Object(n["withCtx"])((function(){return[x]})),_:1})]),Object(n["createElementVNode"])("div",w,[Object(n["createVNode"])(P,{type:"text",style:{width:"120px","text-decoration":"underline",color:"red"},disabled:!this.asideIndex,onClick:e.goApi},{default:Object(n["withCtx"])((function(){return[N]})),_:1},8,["disabled","onClick"])])]),Object(n["createElementVNode"])("div",v,[Object(n["createVNode"])(A,{data:e.tableData,border:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{label:"序号",type:"index",width:"80",align:"center"}),Object(n["createVNode"])(L,{prop:"name",label:"头像",width:"80",align:"center"}),Object(n["createVNode"])(L,{prop:"wxNickName",label:"昵称",width:"280",align:"center"}),Object(n["createVNode"])(L,{prop:"sex",label:"性别",width:"80",align:"center"}),Object(n["createVNode"])(L,{prop:"email",label:"邮箱",align:"center"},{default:Object(n["withCtx"])((function(t){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.getNoEmail(t.row.email)),1)]})),_:1}),Object(n["createVNode"])(L,{prop:"email",label:"权限",align:"center"},{default:Object(n["withCtx"])((function(e){return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(2==e.row.auth?"观察者":1==e.row.auth?"编辑者":"暂无权限"),1)]})),_:1}),Object(n["createVNode"])(L,{label:"切换权限",width:"280",align:"center"},{default:Object(n["withCtx"])((function(t){return[1!=t.row.auth?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:0,size:"small",onClick:function(a){return e.updataAuth(t.row,1)},type:"info"},{default:Object(n["withCtx"])((function(){return[V]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0),2!=t.row.auth?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:1,size:"small",onClick:function(a){return e.updataAuth(t.row,2)},type:"primary"},{default:Object(n["withCtx"])((function(){return[I]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0),e.userInfoItem.email!=t.row.email?(Object(n["openBlock"])(),Object(n["createBlock"])(P,{key:2,size:"small",type:"danger",onClick:function(a){return e.deleteItem(t.row)}},{default:Object(n["withCtx"])((function(){return[C]})),_:2},1032,["onClick"])):Object(n["createCommentVNode"])("",!0)]})),_:1})]})),_:1},8,["data"])])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(B,{modelValue:e.projectShow,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.projectShow=t}),title:"新建项目",width:"30%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(E,{modelValue:e.projectName,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.projectName=t}),modelModifiers:{trim:!0},placeholder:"请输入项目名称(限16个字符以内)",style:{"margin-bottom":"20px"},maxlength:"16"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",k,[Object(n["createVNode"])(P,{size:"small",type:"primary",style:{width:"100%"},loading:e.projectLoad,onClick:e.submitProject},{default:Object(n["withCtx"])((function(){return[y]})),_:1},8,["loading","onClick"])])]})),_:1},8,["modelValue"]),Object(n["createVNode"])(B,{modelValue:e.addUserShow,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.addUserShow=t}),title:"添加成员",width:"30%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{model:e.addUser,rules:e.userRules,ref:"ruleForm",class:"demo-ruleForm"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{prop:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{modelValue:e.addUser.name,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.addUser.name=t}),multiple:"",placeholder:"请选择用户",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.teamUserProjetc,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(T,{key:e.uuid,label:e.nickName,value:e.uuid,disabled:e.disabled},null,8,["label","value","disabled"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(n["createVNode"])(D,{prop:"auth"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(_,{modelValue:e.addUser.auth,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.addUser.auth=t}),placeholder:"请选择权限",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(T,{label:"观察者",value:"1"}),Object(n["createVNode"])(T,{label:"编辑者",value:"2"})]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),Object(n["createElementVNode"])("div",U,[Object(n["createVNode"])(P,{size:"small",type:"primary",style:{width:"100%"},loading:e.addUserLoad,onClick:e.addProjectUser},{default:Object(n["withCtx"])((function(){return[S]})),_:1},8,["loading","onClick"])])]})),_:1},8,["modelValue"])])}a("665c"),a("95a8"),a("87c5"),a("c7bb"),a("cddc");var P=a("f236"),L=a("ddb7"),A={data:function(){return{asideIndex:"",asideProjectName:"",name:"",tableData:[],projectShow:!1,projectName:"",projectLoad:!1,projectList:[],addUserShow:!1,addUserLoad:!1,teamUser:[],addUser:{name:[],auth:"1"},userRules:{name:[{required:!0,message:"请选择用户",trigger:"blur"}],auth:[{required:!0,message:"请选择权限",trigger:"blur"}]},teamUserProjetc:[]}},created:function(){var e=this,t=window.localStorage.getItem("teamValue")||"";t?(this.getProjectItem(),this.getTeamUser()):L["a"].confirm("你目前还没有选择团队,请先选择团队?","警告",{confirmButtonText:"知道了",cancelButtonText:"去管理团队",type:"warning",showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1}).then((function(){e.$router.replace("/")})).catch((function(){e.$router.replace("/team")}))},methods:{addProject:function(){this.projectShow=!0,this.projectName=""},submitProject:function(){var e=this;0!=this.projectName.length&&(this.projectLoad=!0,Object(P["e"])({projectName:this.projectName,projectTeamUuid:window.localStorage.getItem("teamValue")}).then((function(t){200==t.status?(e.$toast.success(t.message),e.projectShow=!1,e.projectName="",e.getProjectItem()):e.$toast.fail("创建失败")})).finally((function(){e.projectLoad=!0})))},getProjectItem:function(){var e=this;Object(P["D"])({projectTeamUuid:window.localStorage.getItem("teamValue")}).then((function(t){if(200==t.status)if(e.projectList=t.data||[],e.projectList.length>0){var a=window.localStorage.getItem("asideIndex");if(a){e.asideIndex=a;for(var n=window.localStorage.getItem("projectValue"),c=!1,o=0;o<e.projectList.length;o++)e.projectList[o].uuid==a&&(e.asideProjectName=e.projectList[o].projectName),n&&e.projectList[o].uuid==n&&(c=!0);n&&!c&&(e.$store.commit("ApiList/clearStore"),window.localStorage.removeItem("projectValue"))}else e.asideIndex=e.projectList[0].uuid,e.asideProjectName=e.projectList[0].projectName,window.localStorage.setItem("asideIndex",e.asideIndex)}else e.$store.commit("ApiList/clearStore"),window.localStorage.removeItem("projectValue")}))},getAuthUser:function(e){var t=this;Object(P["E"])({projectUuid:e}).then((function(e){if(200==e.status){for(var a=e.data,n=a.authUser,c=void 0===n?[]:n,o=a.dataUser,r=void 0===o?[]:o,i=0;i<r.length;i++){r[i].auth=0;for(var l=0;l<c.length;l++)r[i].uuid==c[l].uuid&&(r[i].auth=c[l].auth)}t.tableData=r}}))},getNoEmail:function(e){var t=e.split("@"),a="";return t[0].length<=3?(a="*",t[0]=t[0].substr(0,t[0].length)+a):(a="***",t[0]=t[0].substr(0,1)+a+t[0].charAt(t[0].length-1)),t[0]+"@"+t[1]},updataAuth:function(e,t){var a=this;e.auth=t,Object(P["S"])({projectUuid:this.asideIndex,auth:e}).then((function(e){200==e.status&&(a.$toast.success("更新成功"),a.getAuthUser(a.asideIndex))}))},updataProjectName:function(){var e=this;0!=this.asideProjectName.length&&Object(P["S"])({projectUuid:this.asideIndex,projectName:this.asideProjectName}).then((function(t){200==t.status&&(e.$toast.success("更新成功"),e.getProjectItem())}))},getTeamUser:function(){var e=this;Object(P["I"])({projectTeamUuid:window.localStorage.getItem("teamValue")}).then((function(t){200==t.status&&(e.teamUser=t.data)}))},addNewsUser:function(){for(var e=JSON.parse(JSON.stringify(this.teamUser)),t=this.tableData,a=0;a<e.length;a++)for(var n=0;n<t.length;n++)e[a].uuid==t[n].uuid&&(e[a].disabled=!0);this.teamUserProjetc=e,this.addUserShow=!0},goApi:function(){if(this.asideIndex){var e=window.localStorage.getItem("projectValue");e==this.asideIndex||(window.localStorage.setItem("projectValue",this.asideIndex),this.$store.commit("ApiList/clearStore")),this.$router.push("/api")}},addProjectUser:function(){var e=this;if(0!=this.addUser.name.length){this.addUserLoad=!0;for(var t=[],a=0;a<this.addUser.name.length;a++)t.push({uuid:this.addUser.name[a],auth:this.addUser.auth});Object(P["f"])({uuid:this.asideIndex,teamUser:t}).then((function(t){e.addUserLoad=!1,200==t.status&&(e.addUserShow=!1,e.getProjectItem(),e.getAuthUser(e.asideIndex))})).finally((function(){e.addUserLoad=!1,e.addUserShow=!1}))}},deleteTeam:function(){var e=this;L["a"].confirm("确定要解散该项目吗?","警告",{confirmButtonText:"解散",cancelButtonText:"算了",type:"warning",showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1}).then((function(){Object(P["q"])({uuid:e.asideIndex}).then((function(t){if(200==t.status&&e.asideIndex){var a=window.localStorage.getItem("projectValue");console.log(a,e.asideIndex),a==e.asideIndex&&(e.$store.commit("ApiList/clearStore"),window.localStorage.removeItem("projectValue"));var n=window.localStorage.getItem("asideIndex");e.asideIndex==n&&window.localStorage.removeItem("asideIndex"),e.getProjectItem()}}))})).catch((function(){}))},tagProject:function(e){this.asideIndex=e.uuid,this.asideProjectName=e.projectName,window.localStorage.setItem("asideIndex",e.uuid)},deleteItem:function(e){var t=this;L["a"].confirm("确定要移除该成员吗?","警告",{confirmButtonText:"确定",cancelButtonText:"算了",type:"warning",showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1}).then((function(){Object(P["r"])({teamUser:e.uuid,uuid:t.asideIndex}).then((function(e){200==e.status&&t.getAuthUser(t.asideIndex)}))})).catch((function(){}))}},computed:{userInfoItem:function(){return this.$store.state.userApi.userInfo}},watch:{asideIndex:{handler:function(e){e&&e.length>0&&this.getAuthUser(e)},immediate:!0}}};a("bfa33");A.render=E,A.__scopeId="data-v-2965759a";t["default"]=A},"81ce":function(e,t,a){var n=a("82c1"),c=a("647a"),o=a("3944"),r=o("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==c(e))}},bfa33:function(e,t,a){"use strict";a("d929")},c7bb:function(e,t,a){"use strict";var n=a("28c8"),c=a("51c8"),o=a("9e4a"),r=a("5627"),i=a("81ce"),l=a("35ce"),d=a("d711"),s=a("321d"),u=a("ec9d"),m=a("d6e7"),j=a("7995"),p=a("3424"),h=a("0d4e"),b=a("141d"),f=a("f1b5"),O=a("9a86"),g=a("2f67"),x=O.UNSUPPORTED_Y,w=4294967295,N=Math.min,v=[].push,V=o(/./.exec),I=o(v),C=o("".slice),k=!g((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));r("split",(function(e,t,a){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var o=j(d(this)),r=void 0===a?w:a>>>0;if(0===r)return[];if(void 0===e)return[o];if(!i(e))return c(t,o,e,r);var l,s,u,m=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),b=0,O=new RegExp(e.source,p+"g");while(l=c(f,O,o)){if(s=O.lastIndex,s>b&&(I(m,C(o,b,l.index)),l.length>1&&l.index<o.length&&n(v,m,h(l,1)),u=l[0].length,b=s,m.length>=r))break;O.lastIndex===l.index&&O.lastIndex++}return b===o.length?!u&&V(O,"")||I(m,""):I(m,C(o,b)),m.length>r?h(m,0,r):m}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:c(t,this,e,a)}:t,[function(t,a){var n=d(this),r=void 0==t?void 0:p(t,e);return r?c(r,t,n,a):c(o,j(n),t,a)},function(e,n){var c=l(this),r=j(e),i=a(o,c,r,n,o!==t);if(i.done)return i.value;var d=s(c,RegExp),p=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(x?"g":"y"),f=new d(x?"^(?:"+c.source+")":c,h),O=void 0===n?w:n>>>0;if(0===O)return[];if(0===r.length)return null===b(f,r)?[r]:[];var g=0,v=0,V=[];while(v<r.length){f.lastIndex=x?0:v;var k,y=b(f,x?C(r,v):r);if(null===y||(k=N(m(f.lastIndex+(x?v:0)),r.length))===g)v=u(r,v,p);else{if(I(V,C(r,g,v)),V.length===O)return V;for(var U=1;U<=y.length-1;U++)if(I(V,y[U]),V.length===O)return V;v=g=k}}return I(V,C(r,g)),V}]}),!k,x)},cddc:function(e,t,a){var n=a("e7b1"),c=a("d10e"),o=a("5c74"),r=a("28c8"),i=a("9e4a"),l=a("2f67"),d=c.Array,s=o("JSON","stringify"),u=i(/./.exec),m=i("".charAt),j=i("".charCodeAt),p=i("".replace),h=i(1..toString),b=/[\uD800-\uDFFF]/g,f=/^[\uD800-\uDBFF]$/,O=/^[\uDC00-\uDFFF]$/,g=function(e,t,a){var n=m(a,t-1),c=m(a,t+1);return u(f,e)&&!u(O,c)||u(O,e)&&!u(f,n)?"\\u"+h(j(e,0),16):e},x=l((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&n({target:"JSON",stat:!0,forced:x},{stringify:function(e,t,a){for(var n=0,c=arguments.length,o=d(c);n<c;n++)o[n]=arguments[n];var i=r(s,null,o);return"string"==typeof i?p(i,b,g):i}})},d929:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a8cacf9a.3c3b1d08.js.map