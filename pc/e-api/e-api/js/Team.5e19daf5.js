(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Team"],{"1e0f":function(e,t,a){},"3eba":function(e,t,a){"use strict";a.r(t);var n=a("6a59"),o=function(e){return Object(n["pushScopeId"])("data-v-14cb4708"),e=e(),Object(n["popScopeId"])(),e},c={class:"teamIndex"},i={class:"teamIndexAside"},r={class:"teamIndexAsideNews"},d=o((function(){return Object(n["createElementVNode"])("span",{class:"iconfont icon-jiahao"},null,-1)})),l=[d],s={class:"teamIndexAsideNameHome"},m={class:"teamIndexAsideList"},u=["onClick"],b=o((function(){return Object(n["createElementVNode"])("span",{class:"iconfont icon-list",style:{color:"#88A0CD","margin-right":"5px"}},null,-1)})),h={key:0,class:"teamIndexMain"},p={class:"teamIndexMainName"},f=o((function(){return Object(n["createElementVNode"])("div",{class:"teamIndexMainNameLeft"}," 团队名称： ",-1)})),j={class:"teamIndexMainNameInput"},O={class:"teamIndexMainNameRight"},g=Object(n["createTextVNode"])("确认修改"),x={class:"teamIndexMainNameRight"},w=Object(n["createTextVNode"])("添加成员"),N={class:"teamIndexMainNameRight"},v=Object(n["createTextVNode"])("解散团队"),V={class:"teamIndexMainNameRight",style:{"margin-left":"20px"}},I=Object(n["createTextVNode"])("切换团队"),U={class:"teamIndexMainTable"},k=Object(n["createTextVNode"])("移除团队"),C={class:"teamSubmit"},S=Object(n["createTextVNode"])("确认添加"),T={class:"teamSubmit"},y=Object(n["createTextVNode"])("确认添加");function L(e,t){var a=Object(n["resolveComponent"])("el-scrollbar"),o=Object(n["resolveComponent"])("el-input"),d=Object(n["resolveComponent"])("el-button"),L=Object(n["resolveComponent"])("el-table-column"),A=Object(n["resolveComponent"])("el-table"),E=Object(n["resolveComponent"])("el-option"),D=Object(n["resolveComponent"])("el-select"),$=Object(n["resolveComponent"])("el-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",r,[Object(n["createElementVNode"])("div",{class:"teamIndexAsideNameIcon",onClick:t[0]||(t[0]=function(){return e.addTeam&&e.addTeam.apply(e,arguments)})},l),Object(n["createElementVNode"])("div",{class:"teamIndexAsideNameText",onClick:t[1]||(t[1]=function(){return e.addTeam&&e.addTeam.apply(e,arguments)})}," 新建团队 "),Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("span",{class:"iconfont icon-zhuye",title:"主页",onClick:t[2]||(t[2]=function(){return e.goIndex&&e.goIndex.apply(e,arguments)})})])]),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(a,{style:{height:"100%"}},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.teamDataList,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["teamIndexAsideListItem",t.uuid==e.asideIndex&&"teamIndexAsideListItemActive"]),key:t,onClick:function(a){return e.tegTeam(t)}},[b,Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(t.teamName),1)],10,u)})),128))]})),_:1})])]),e.asideIndex?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",h,[Object(n["createElementVNode"])("div",p,[f,Object(n["createElementVNode"])("div",j,[Object(n["createVNode"])(o,{modelValue:e.teamNameUpdata,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.teamNameUpdata=t}),maxlength:"16",placeholder:"请输入团队名称(限16个字符以内)"},null,8,["modelValue"])]),Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(d,{type:"primary",style:{width:"120px"},onClick:e.submitUpdata},{default:Object(n["withCtx"])((function(){return[g]})),_:1},8,["onClick"])]),Object(n["createElementVNode"])("div",x,[Object(n["createVNode"])(d,{type:"success",style:{width:"120px"},onClick:e.addUser},{default:Object(n["withCtx"])((function(){return[w]})),_:1},8,["onClick"])]),Object(n["createElementVNode"])("div",N,[Object(n["createVNode"])(d,{type:"danger",style:{width:"120px"},onClick:e.deleteTeam},{default:Object(n["withCtx"])((function(){return[v]})),_:1},8,["onClick"])]),Object(n["createElementVNode"])("div",V,[Object(n["createVNode"])(d,{type:"text",style:{width:"120px","text-decoration":"underline",color:"red"},onClick:e.tagTeam},{default:Object(n["withCtx"])((function(){return[I]})),_:1},8,["onClick"])])]),Object(n["createElementVNode"])("div",U,[Object(n["createVNode"])(A,{data:e.tableData,border:"",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(L,{label:"序号",type:"index",width:"80",align:"center"}),Object(n["createVNode"])(L,{prop:"name",label:"头像",width:"80",align:"center"}),Object(n["createVNode"])(L,{prop:"nickName",label:"昵称",width:"280",align:"center"}),Object(n["createVNode"])(L,{prop:"email",label:"邮箱",align:"center"}),Object(n["createVNode"])(L,{label:"操作",width:"280",align:"center"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(d,{size:"small",type:"danger",loading:e.teamLoad,onClick:function(a){return e.removeTeam(t.row)}},{default:Object(n["withCtx"])((function(){return[k]})),_:2},1032,["loading","onClick"])]})),_:1})]})),_:1},8,["data"])])])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])($,{modelValue:e.userShow,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.userShow=t}),title:"添加成员",width:"30%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(D,{modelValue:e.addForm.teamUserUuid,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.addForm.teamUserUuid=t}),multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入账号搜索",size:"large",style:{width:"100%","margin-bottom":"50px"},"remote-method":e.remoteMethod,loading:e.loading},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.options,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(E,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","remote-method","loading"]),Object(n["createElementVNode"])("div",C,[Object(n["createVNode"])(d,{size:"small",type:"primary",style:{width:"150px"},loading:e.isAddLoad,onClick:e.addTeamUser},{default:Object(n["withCtx"])((function(){return[S]})),_:1},8,["loading","onClick"])])]})),_:1},8,["modelValue"]),Object(n["createVNode"])($,{modelValue:e.teamShow,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.teamShow=t}),title:"新建团队",width:"30%",center:"","close-on-click-modal":!1,"close-on-press-escape":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(o,{modelValue:e.teamName,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.teamName=t}),modelModifiers:{trim:!0},placeholder:"请输入团队名称(限16个字符以内)",style:{"margin-bottom":"20px"},maxlength:"16"},null,8,["modelValue"]),Object(n["createElementVNode"])("div",T,[Object(n["createVNode"])(d,{size:"small",type:"primary",style:{width:"100%"},loading:e.teamLoad,onClick:e.submitTeam},{default:Object(n["withCtx"])((function(){return[y]})),_:1},8,["loading","onClick"])])]})),_:1},8,["modelValue"])])}var A=a("799e"),E=(a("dfcf"),a("87c5"),a("e186"),a("f236")),D=a("ddb7"),$={data:function(){return{asideIndex:null,teamNameUpdata:"",tableData:[],outUser:[],userShow:!1,userValue:"",userOptions:[{value:"",label:"张三"}],teamShow:!1,teamName:"",teamLoad:!1,teamDataList:[],loading:!1,options:[],addForm:{teamUserUuid:""},isAddLoad:!1}},created:function(){this.getSearchTeam()},methods:{addTeam:function(){this.teamShow=!0,this.teamName=""},submitTeam:function(){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.teamName.length){t.next=2;break}return t.abrupt("return",!1);case 2:return e.teamLoad=!0,t.next=5,Object(E["h"])({teamName:e.teamName});case 5:a=t.sent,e.teamLoad=!1,200==a.status?(e.$toast.success(a.message),e.teamShow=!1,e.getSearchTeam()):e.$toast.fail(a.message);case 8:case"end":return t.stop()}}),t)})))()},getSearchTeam:function(){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){var a,n,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["H"])();case 2:if(a=t.sent,200==a.status){if(e.teamDataList=a.data||[],e.teamDataList.length>0)if(n=window.localStorage.getItem("teamActiveIndex"),n){for(e.asideIndex=n,e.teamNameUpdata="",o=[],c=0;c<e.teamDataList.length;c++)e.teamDataList[c].uuid==n&&(o=e.teamDataList[c].teamUserUuid,e.teamNameUpdata=e.teamDataList[c].teamName);e.getSearchUserAllInfo(o)}else e.asideIndex=e.teamDataList[0].uuid,e.teamNameUpdata=e.teamDataList[0].teamName,e.getSearchUserAllInfo(e.teamDataList[0].teamUserUuid),window.localStorage.setItem("teamActiveIndex",e.teamDataList[0].uuid)}else e.$toast.fail(a.message);case 4:case"end":return t.stop()}}),t)})))()},tegTeam:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log(e),t.asideIndex=e.uuid,t.teamNameUpdata=e.teamName,t.getSearchUserAllInfo(e.teamUserUuid),window.localStorage.setItem("teamActiveIndex",e.uuid);case 5:case"end":return a.stop()}}),a)})))()},getSearchUserAllInfo:function(e){var t=this;return Object(A["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(E["M"])({teamUserUuid:e});case 2:n=a.sent,200==n.status&&(t.tableData=n.data);case 4:case"end":return a.stop()}}),a)})))()},submitUpdata:function(){var e=this;return Object(A["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["U"])({uuid:e.asideIndex,teamName:e.teamNameUpdata});case 2:a=t.sent,200==a.status?(e.$toast.success(a.message),e.getSearchTeam()):e.$toast.fail(a.message);case 4:case"end":return t.stop()}}),t)})))()},goIndex:function(){this.$router.push("/")},tagTeam:function(){var e=window.localStorage.getItem("teamValue");e&&e==this.asideIndex?(this.teamShow=!1,this.$toast.success("切换成功"),this.$router.push("/")):(window.localStorage.setItem("teamValue",this.asideIndex),window.localStorage.removeItem("projectValue"),this.$store.commit("ApiList/clearStore"),this.$router.push("/"),this.$store.dispatch("ApiList/getTeamInfo",this.asideIndex))},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,Object(E["K"])({teamUser:this.outUser,email:e}).then((function(e){if(t.loading=!1,200==e.status){var a=e.data||[];return a.map((function(e){e.value=e.uuid,e.label=e.email})),t.options=a,a}})).catch((function(){t.loading=!1}))):this.options=[]},addTeamUser:function(){var e=this;0!=this.addForm.teamUserUuid.length?(this.isAddLoad=!0,Object(E["i"])({uuid:this.asideIndex,teamUser:this.addForm.teamUserUuid}).then((function(t){e.isAddLoad=!1,200==t.status&&(e.userShow=!1,e.getSearchTeam(),e.$nextTick((function(){e.$toast.success("添加成功")})))})).finally((function(){e.isAddLoad=!1}))):this.$toast.fail("请先选择用户")},addUser:function(){this.addForm.teamUserUuid=[],this.options=[],this.userShow=!0},removeTeam:function(e){var t=this;this.teamLoad=!0,Object(E["u"])({uuid:this.asideIndex,teamUser:e.uuid}).then((function(e){200==e.status&&(t.teamLoad=!1,t.getSearchTeam())})).finally((function(){t.teamLoad=!1}))},deleteTeam:function(){var e=this;D["a"].confirm("确定要解散该团队吗?","警告",{confirmButtonText:"解散",cancelButtonText:"算了",type:"warning",showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1}).then((function(){Object(E["t"])({uuid:e.asideIndex}).then((function(t){if(200==t.status){var a=window.localStorage.getItem("teamActiveIndex");a==e.asideIndex&&window.localStorage.removeItem("teamActiveIndex");var n=window.localStorage.getItem("teamValue");n==e.asideIndex&&(window.localStorage.removeItem("teamValue"),window.localStorage.removeItem("projectValue"),e.$store.commit("ApiList/clearStore")),e.getSearchTeam()}}))})).catch((function(){}))}},watch:{tableData:{handler:function(e){e.length>0&&(this.outUser=e.map((function(e){return e.uuid})))},deep:!0,immediate:!0}}};a("9b1b");$.render=L,$.__scopeId="data-v-14cb4708";t["default"]=$},"9b1b":function(e,t,a){"use strict";a("1e0f")},dfcf:function(e,t,a){"use strict";var n=a("e7b1"),o=a("5a69").map,c=a("8340"),i=c("map");n({target:"Array",proto:!0,forced:!i},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=Team.5e19daf5.js.map